<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Êé•È£ØÁ≥∞VR - ÈñãÂßãÁï´Èù¢</title>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700;900&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "kitchen-blue-light": "#E0F7FA", // Light blue wall
                        "kitchen-blue": "#B2EBF2", // Slightly darker blue stripe
                        "kitchen-floor": "#E0F2F1", // Floor
                        "kitchen-cabinet": "#A5D6A7", // Green cabinet
                        "btn-red": "#E53935", // Red button
                        "btn-red-border": "#C62828", // Red button border
                        "btn-yellow-border": "#FBC02D", // Yellow outer border for red button
                        "kid-orange": "#FFB74D",
                        "kid-brown": "#5D4037",
                        "kid-text-outline": "#795548",
                    },
                    fontFamily: {
                        "cute": ["'Zen Maru Gothic'", "sans-serif"],
                    },
                    boxShadow: {
                        "cartoon": "0 6px 0px rgba(0,0,0,0.2)",
                        "cartoon-hover": "0 3px 0px rgba(0,0,0,0.2)",
                        "card": "0 10px 25px -5px rgba(93, 64, 55, 0.15)",
                        "btn-inner": "inset 0 4px 6px rgba(255, 255, 255, 0.4), inset 0 -4px 4px rgba(0, 0, 0, 0.1)",
                        "btn-glow": "0 0 15px rgba(255, 215, 0, 0.6)",
                    },
                    animation: {
                        'bounce-slow': 'bounce 3s infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'float-delayed': 'float 6s ease-in-out 3s infinite',
                        'wiggle': 'wiggle 1s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        wiggle: {
                            '0%, 100%': { transform: 'rotate(-3deg)' },
                            '50%': { transform: 'rotate(3deg)' },
                        }
                    }
                },
            },
        }
    </script>
    <style>
        .text-stroke {
            -webkit-text-stroke: 6px #FFF;
            paint-order: stroke fill;
        }

        .text-stroke-brown {
            -webkit-text-stroke: 4px #5D4037;
            color: #FFECB3;
            paint-order: stroke fill;
        }

        .text-stroke-orange {
            -webkit-text-stroke: 8px #FFF;
            paint-order: stroke fill;
            text-shadow: 4px 4px 0px rgba(0, 0, 0, 0.1);
        }

        .kitchen-stripe {
            background: repeating-linear-gradient(90deg,
                    #E0F7FA,
                    #E0F7FA 40px,
                    #B2EBF2 40px,
                    #B2EBF2 80px);
        }

        .kitchen-floor-pattern {
            background-image:
                linear-gradient(45deg, #B2DFDB 25%, transparent 25%, transparent 75%, #B2DFDB 75%, #B2DFDB),
                linear-gradient(45deg, #B2DFDB 25%, transparent 25%, transparent 75%, #B2DFDB 75%, #B2DFDB);
            background-color: #E0F2F1;
            background-position: 0 0, 20px 20px;
            background-size: 40px 40px;
            opacity: 0.3;
        }

        .wood-shelf {
            background-color: #D7CCC8;
            border-bottom: 8px solid #A1887F;
            border-radius: 8px;
        }

        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }
    </style>
    <style>
        body {
            min-height: max(800px, 100dvh);
        }
    </style>
    <style>
        body {
            min-height: max(884px, 100dvh);
        }
    </style>
</head>

<body class="bg-kitchen-blue-light text-kid-brown font-cute overflow-hidden select-none">
    <div class="relative h-[100dvh] w-full overflow-hidden flex flex-col">
        <div class="absolute inset-0 z-0 kitchen-stripe opacity-60"></div>
        <div class="absolute bottom-0 left-0 right-0 h-[35%] z-0 kitchen-floor-pattern border-t-8 border-white/50">
        </div>
        <div
            class="absolute top-[15%] left-[-20px] w-48 h-4 bg-[#FFCC80] border-b-4 border-[#EF6C00] rounded-r-lg z-0 rotate-3 shadow-cartoon">
            <span class="absolute -top-10 left-8 text-[40px]">üçÖ</span>
            <span class="absolute -top-9 left-24 text-[35px]">üçÑ</span>
        </div>
        <div
            class="absolute top-[20%] right-[-30px] w-40 h-4 bg-[#FFCC80] border-b-4 border-[#EF6C00] rounded-l-lg z-0 -rotate-2 shadow-cartoon">
            <span class="absolute -top-10 right-16 text-[40px] rotate-45">ü•ï</span>
        </div>
        <div class="absolute top-[10%] right-[20%] z-0 animate-float-delayed">
            <span class="material-symbols-outlined text-[60px] text-gray-400 rotate-12">skillet</span>
        </div>
        <div id="rice-ball-3d-container"
            class="absolute top-[33%] left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] z-0 flex items-center justify-center pointer-events-none">
            <!-- 3D Model loaded here -->
        </div>

        <div class="relative z-20 w-full px-6 py-4 flex justify-between items-center">

            <button id="volume-btn"
                class="w-12 h-12 flex items-center justify-center rounded-full bg-white hover:bg-white/90 shadow-cartoon active:translate-y-[3px] active:shadow-none transition-all border-2 border-kid-brown/10">
                <span id="volume-icon" class="material-symbols-outlined text-kid-brown text-[28px]">volume_up</span>
            </button>
            <script>
                const volBtn = document.getElementById('volume-btn');
                const volIcon = document.getElementById('volume-icon');

                // Init state
                let isMuted = localStorage.getItem('isMuted') === 'true';
                updateIcon();

                volBtn.addEventListener('click', () => {
                    isMuted = !isMuted;
                    localStorage.setItem('isMuted', isMuted);
                    updateIcon();

                    // Optional: Play a test sound if unmuting? 
                    // No, kept simple as requested.
                });

                function updateIcon() {
                    if (isMuted) {
                        volIcon.innerText = 'volume_off';
                        volIcon.classList.add('text-gray-400');
                        volIcon.classList.remove('text-kid-brown');
                    } else {
                        volIcon.innerText = 'volume_up';
                        volIcon.classList.remove('text-gray-400');
                        volIcon.classList.add('text-kid-brown');
                    }
                }
            </script>
        </div>
        <div class="relative z-20 flex-1 flex flex-col justify-between pb-4 px-6 w-full max-w-md mx-auto">
            <div class="mt-2 text-center relative">
                <h1 class="font-black text-kid-orange tracking-tight leading-none drop-shadow-xl relative inline-block">
                    <div class="flex flex-col items-center">
                        <span class="text-[4rem] text-stroke-orange text-[#FFB74D]">È£ØÁ≥∞Â§ß‰ΩúÊà∞</span>
                    </div>
                </h1>
            </div>
            <div class="absolute top-1/3 left-4 text-[50px] animate-float rotate-12 z-0 opacity-80 drop-shadow-lg">üç§
            </div>
            <div
                class="absolute top-1/3 right-4 text-[50px] animate-float-delayed -rotate-12 z-0 opacity-80 drop-shadow-lg">
                üç≥</div>

            <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
    }
  }
</script>
            <script type="module">
                import * as THREE from 'three';
                import { MTLLoader } from 'three/addons/loaders/MTLLoader.js';
                import { OBJLoader } from 'three/addons/loaders/OBJLoader.js';

                const container = document.getElementById('rice-ball-3d-container');

                // Scene setup
                const scene = new THREE.Scene();

                // Camera setup
                // Adjusted camera to be closer or FOV different? Keep 45 for now.
                const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);
                camera.position.set(0, 5, 25); // Lower camera slightly to look more direct
                camera.lookAt(0, 2, 0); // Look at center slightly up

                // Renderer setup
                const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
                renderer.setSize(container.clientWidth, container.clientHeight);
                renderer.setPixelRatio(window.devicePixelRatio);
                container.appendChild(renderer.domElement);

                // Lighting
                const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444, 2.8);
                hemiLight.position.set(0, 20, 0);
                scene.add(hemiLight);

                const dirLight = new THREE.DirectionalLight(0xffffff, 2.0);
                dirLight.position.set(10, 10, 10);
                scene.add(dirLight);

                // Group for rotation control (independent of model animations)
                const modelGroup = new THREE.Group();
                scene.add(modelGroup);

                // Load Model (MTL + OBJ)
                const mtlLoader = new MTLLoader();
                const objLoader = new OBJLoader();
                const clock = new THREE.Clock();

                mtlLoader.setPath('./3dmodel_sep/');
                objLoader.setPath('./3dmodel_sep/');

                mtlLoader.load('riceball_main.mtl', (materials) => {
                    materials.preload();
                    objLoader.setMaterials(materials);

                    objLoader.load('riceball_main.obj', (object) => {
                        const box = new THREE.Box3().setFromObject(object);
                        const size = box.getSize(new THREE.Vector3());
                        const center = box.getCenter(new THREE.Vector3());

                        // Adjusted scale mostly
                        const maxDim = Math.max(size.x, size.y, size.z);
                        const scale = 14 / maxDim;
                        object.scale.set(scale, scale, scale);

                        // Re-center object within the group
                        object.position.x = -center.x * scale;
                        object.position.y = -center.y * scale - 2;
                        object.position.z = -center.z * scale;

                        // Add to group
                        modelGroup.add(object);

                        // Fix Rotation on the GROUP
                        modelGroup.rotation.y = Math.PI / 2;

                        // No Animation Mixer for OBJ
                    }, (xhr) => {
                        console.log((xhr.loaded / xhr.total * 100) + '% loaded obj');
                    }, (error) => {
                        console.error('An error happened loading obj', error);
                    });

                }, (xhr) => {
                    // MTL progress
                }, (error) => {
                    console.error('An error happened loading mtl', error);
                });

                // Animation Loop
                function animate() {
                    requestAnimationFrame(animate);

                    // Auto-rotate slowly
                    modelGroup.rotation.y += 0.01;

                    renderer.render(scene, camera);
                }
                animate();

                // Handle Resize
                window.addEventListener('resize', () => {
                    if (!container) return;
                    camera.aspect = container.clientWidth / container.clientHeight;
                    camera.updateProjectionMatrix();
                    renderer.setSize(container.clientWidth, container.clientHeight);
                });
            </script>
            <div class="mt-auto flex flex-col gap-4">
                <div class="bg-white/80 backdrop-blur-md rounded-[2rem] p-3 shadow-card border-4 border-white mx-2">
                    <h3
                        class="text-center text-kid-brown font-bold mb-2 text-sm bg-[#FFECB3] inline-block px-3 py-0.5 rounded-full mx-auto block w-fit border-2 border-white">
                        ÈÅ∏ÊìáÁé©Ê≥ï</h3>
                    <div class="flex gap-3">
                        <label class="flex-1 relative cursor-pointer group">
                            <input checked="" class="peer sr-only" name="game_mode" type="radio" value="experience" />
                            <div
                                class="h-16 flex items-center justify-center gap-2 rounded-2xl border-4 border-transparent bg-[#C8E6C9] transition-all duration-300 peer-checked:bg-[#81C784] peer-checked:border-white peer-checked:shadow-cartoon peer-checked:-translate-y-1 text-kid-brown peer-checked:text-white hover:bg-[#A5D6A7]">
                                <span class="material-symbols-outlined text-[24px]">spa</span>
                                <span class="font-black text-lg">È´îÈ©ó</span>
                            </div>
                        </label>
                        <label class="flex-1 relative cursor-pointer group">
                            <input class="peer sr-only" name="game_mode" type="radio" value="challenge" />
                            <div
                                class="h-16 flex items-center justify-center gap-2 rounded-2xl border-4 border-transparent bg-[#FFCCBC] transition-all duration-300 peer-checked:bg-[#FF7043] peer-checked:border-white peer-checked:shadow-cartoon peer-checked:-translate-y-1 text-kid-brown peer-checked:text-white hover:bg-[#FFAB91]">
                                <span class="material-symbols-outlined text-[24px]">local_fire_department</span>
                                <span class="font-black text-lg">ÊåëÊà∞</span>
                            </div>
                        </label>
                    </div>
                </div>
                <button onclick="startGame()"
                    class="relative w-full h-24 bg-btn-red hover:bg-red-500 active:scale-95 transition-all rounded-[2rem] flex items-center justify-center shadow-[0_8px_0_#C62828] active:shadow-none active:translate-y-[8px] border-[6px] border-[#FBC02D] group overflow-visible mb-2">
                    <div class="absolute top-2 left-4 w-[90%] h-4 bg-white/20 rounded-full blur-sm"></div>
                    <div class="relative flex items-center gap-3 z-10">
                        <span
                            class="text-white font-black text-4xl tracking-wider drop-shadow-md stroke-text">ÈñãÂßãÈÅäÊà≤!</span>
                    </div>
                    <span class="absolute -top-2 -right-2 text-yellow-300 text-3xl animate-pulse">‚ú®</span>
                </button>
                <script>
                    function startGame() {
                        const mode = document.querySelector('input[name="game_mode"]:checked').value;
                        window.location.href = `playing.html?difficulty=${mode}`;
                    }
                </script>
            </div>
        </div>
    </div>
    <div class="hidden">
        <img alt="Digital art of a Japanese shrine at dusk with soft lighting and floating particles"
            class="w-full h-full object-cover"
            src="https://lh3.googleusercontent.com/aida-public/AB6AXuA0-r6FaKcI4TLdGB68NBlX4k56M7RJ1g268TZ9B4iqOq7pm7Go1FVNd2zNZBYenNUMYk_ZYNRQI5fglS1md2PWrLiIlfp3lesfbvqfTBNmB-LJfyzRL1DvHlHzppj7IPZXUifQiGsy4Ucez2bYd1PoEimJlsTlNkHJN89JFkJGjPhEY5H1YHdTKEZR_5PoU1b0BsUYt1vyalz2tyTe-n-e1hj8Ea_FH2DUfRvZ-Qc4DNErgfMLRbvBVIJbE89mHc2UhYZSjqHvDbk" />
    </div>

</body>

</html>